---

name: "Mirror"
run-name: "Mirror"
permissions: write-all

on:
  workflow_dispatch:
  schedule:
    - cron: "0 0 1 * *" # monthly

env:
  GH_TOKEN: '${{ github.token }}'
  GITHUB_TOKEN: '${{ github.token }}'

jobs:
  mirror:
    name: "Mirror"
    runs-on: ubuntu-latest
    steps:

      - name: "Checkout"
        uses: actions/checkout@v4

      - name: "Mirror"
        run: date +%s > .test # for testing, will change

      - name: "Commit"
        run: git add . && git commit --allow-empty --message="${MESSAGE}" && git push
        env:
          GIT_COMMITTER_NAME: github-actions[bot]
          GIT_COMMITTER_EMAIL: 41898282+github-actions[bot]@users.noreply.github.com
          MESSAGE: |
            Automatic mirror update
